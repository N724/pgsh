# 胖乖生活助手 (astrbot 插件)

这是一个 astrbot 插件，用于简化胖乖生活账号的 Token 获取和同步过程。它允许用户通过短信验证码登录，并将获取到的有效 Token 自动添加或更新到指定的青龙面板环境变量中。

## 主要功能

*   **发送验证码**: 向指定手机号发送胖乖生活登录验证码。
*   **短信登录**: 使用手机号和收到的验证码登录胖乖生活。
*   **自动同步青龙**: 登录成功后，自动将获取到的 Token 添加或更新到预配置的青龙面板环境变量。
*   **信息查询**: 查询已同步到青龙的账号的积分信息（需要 Token 仍然有效）。

## 配置

**重要**: 此插件需要直接在 `main.py` 文件中进行配置。请修改以下变量：

*   `QL_URL`: 你的青龙面板地址 (例如: `"http://192.168.1.100:5700"`)。
*   `QL_CLIENT_ID`: 在青龙面板 "系统设置" -> "应用设置" 中创建的应用的 Client ID。
*   `QL_CLIENT_SECRET`: 对应应用的 Client Secret。
*   `QL_ENV_NAME`: 你希望在青龙中存储胖乖 Token 的环境变量名称 (例如: `"pangguai"`)。

## 使用方法

1.  **发送验证码**:
    ```
    /胖乖发码 <你的手机号>
    ```
    例如: `/胖乖发码 13812345678`
    机器人会提示验证码已发送。

2.  **登录并同步**:
    收到验证码后，使用以下指令登录：
    ```
    /胖乖登录 <你的手机号> <收到的验证码>
    ```
    例如: `/胖乖登录 13812345678 123456`
    如果成功，机器人会提示登录成功并将 Token 同步至青龙。

3.  **查询信息** (可选):
    查询已同步账号的积分信息：
    ```
    /胖乖查询 <你的手机号>
    ```
    例如: `/胖乖查询 13812345678`
    这会从青龙读取 Token 并查询胖乖 API。如果 Token 失效或未找到，会提示错误。

4.  **获取帮助**:
    ```
    /胖乖帮助
    ```
    显示插件的详细指令说明。

## 注意事项

*   请确保填写的青龙配置信息准确无误，并且 astrbot 运行的环境能够访问你的青龙面板地址。
*   青龙应用需要有读取和写入环境变量的权限。
*   胖乖生活的 API 可能会发生变化，导致插件失效。
*   网络问题或 API 限制可能导致指令失败。
*   此版本移除了原脚本的复杂用户管理、授权和支付功能，专注于核心的登录同步流程。
